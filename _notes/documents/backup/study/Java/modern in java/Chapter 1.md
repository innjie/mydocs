# Chapter 1

# 요약

-   자바가 변화하는 이유
-   컴퓨팅의 변화
-   자바 발전에 대한 압박
-   자바 8과 자바 9의 핵심 기능

# 개요

`Java 8` 은 어느 버전보다도 많은 변화가 이루어졌다.

## 리스트 내의 아이템을 정렬하는 예제코드

```java
Collections.sort(inventory, new Comparator<Apple>() {
    public int compare(Apple a1, Apple a2){
        return a1.getWeight().compareTo(a2.getWeight());
    }
});
```

위의 코드를 Java 8에서는 아래와 같이 바꿀 수 있다.

```java
inventory.sort(comparing(Apple::getWeight));
```

이것은 `apple weight` 를 비교해서 `inventory` 를 정렬하라고 읽을 수 있다.

여기에는 하드웨어의 영향도 있다. `CPU가 멀티코어` 가 되었다. 그러나 기존 자바의 대부분은 1개의 코어를 사용했다. 그러므로 `Java 8`의 이전 버전에서 스레드를 쓰는 것은 굉장히 어렵고 에러가 나기 쉬운 환경이었다. `Java 5` 에서 스레드 풀과 동시성 컬렉션, `Java 7` 에서 포크/조인 프레임워크, 병렬화가 추가되었지만 여전히 병렬 처리는 어려웠다. `Java 8` 에서 병렬화를 처리하기 위한 방법이 소개되었지만, 몇가지 규칙을 따른다. `Java 9` 에서 `동적 프로그래밍` (동시성을 위한 구조적 메소드)을 추가했다. 이는 `RxJava` 와 `Akka` 를 이용하는 수단을 표준화한다.

RxJava란?

Akka란?

Java 8의 핵심 아이디어는 다음과 같다.

-   Stream API
-   메소드에 코드를 전달하는 방법
-   인터페이스의 Default method

## Stream API

`Stream API` 는 낮은 실행 수준을 보여준다. 결과적으로 코드 작성량을 줄여 에러 발생과 저비용으로 실행할 수 있게 해준다.

멀티코어 CPU는 각각의 프로세스에 할당되는 분리된 캐시를 가진다. `Lock` 을 위해서는 이 캐시들이 동기화 되어야 하며, 느린, 일관성 있는 코어 간 통신이 필요하다.

또한 Stream API는 `lambda`와 `default method` 추가의 직접적인 원인이 되었다고 볼 수 있다.

-   매개변수를 보내는데 있어 `추상 클래스`를 사용한 것과 같은 효과
-   `함수형 프로그래밍` 을 제공하며 생산적인 코드를 제공

# 계속 변화하는 이유

프로그래밍 언어는 생태계의 양상을 띈다. 새로운 언어가 생기면, 오래된 언어는 사라진다.

### 예시

예를 들어, `C` 와 `C++` 은 운영체제와 임베디드 시스템을 구축하는데 주로 쓰이는 언어로 남았다. 프로그래밍 안정성에 비해 짧은 런타임이 그 이유이다. 이들의 안정성은 예측 불가능한 종료나 노출에 취약하다. 실제로, `Java` 와 `C#` 과 같은 객체지향 언어들이 추가적인 런타임이 있더라도 다양한 애플리케이션에 사용된다.

## 생태계 속의 자바

자바는 처음 배포되었을 때부터 디자인이 잘 되어 있고, 다양한 라이브러리가 포함된 객체지향언어였다. 작은 크기의 프로그램에도 적합하고, `JVM` 컴파일러가 모든 브라우저에서 지원되는 수준으로 웹에 적합한 언어가 되었다. 최근에는 JVM이 지원하는 자바의 경쟁 언어 (Scala, Groovy, Kotlin) 들이 생겼지만, 여전히 자바는 스마트카드, 토스터, 셋톱박스, 자동차 주행 시스템 등의 분야에서 쓰이고 있다.

### 자바는 어떻게 시장을 공략했는가?

객체지향은 1990년대부터 두가지 이유로 인기를 얻게 되었다.

1.  `캡슐화` 를 통해 C에 비해 적은 오류
2.  윈도우 95 버전 이상에서 윔프 프로그래밍 모델의 기초

즉, 모든것은 객체이고, 동작이 핸들러로 전달되는 형식. 한번에 입력으로 다양한 출력을 구현할 수 있고 일찍이 브라우저들이 자바 코드가 동작하는 환경을 갖춰 대학에서 시장을 구축했고, 산업으로 이어졌다. C와 C++보다는 추가 실행 비용이 있었지만, 하드웨어가 빠르게 성장하면서 프로그래머의 역량도 중요해졌다. MS의 `C#` 은 객체 지향모델을 더욱 검증하게 되었다.